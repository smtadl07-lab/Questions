import { useState, useCallback, useEffect } from 'react';
import { Language, Translations } from '../types';

// Static translation dictionary
const translations: Translations = {
  [Language.EN]: {
    title: 'Intelligent Question Generator',
    welcome_subtitle: 'Generate questions from your notes in seconds.',
    welcome_upload_button: 'ğŸ“„ Upload Your Study File',
    welcome_upload_helper_text: 'Ensure the text is clear and correctly written.',
    upload_prompt: 'Paste your study material here, or upload a file above.',
    upload_button: 'Analyze Text',
    upload_instruction: 'Drag & drop your file here, paste text, or',
    upload_browse: 'browse files',
    upload_file_types: 'PDF, DOCX, TXT, PNG, JPG',
    parsing_file: 'Parsing your file...',
    loaded_file_label: 'Loaded file:',
    processing: 'Analyzing your text...',
    select_page_range_title: 'Which pages should I focus on?',
    select_page_range_subtitle: 'Your document has {count} pages.',
    from_page: 'From page',
    to_page: 'To page',
    continue_button: 'Continue',
    select_type_title: 'Choose Question Type',
    multiple_choice: 'Multiple Choice',
    true_false: 'True/False',
    select_count_title: 'How many questions?',
    generate_button: 'Generate Questions',
    generating: 'Generating your questions...',
    check_answer: 'Check Answer',
    next_question: 'Next Question',
    correct_feedback: 'Correct!',
    incorrect_feedback: 'Incorrect. The correct answer is:',
    more_questions: 'Generate More Questions?',
    completed_title: 'Well done!',
    completed_message: 'You have successfully completed your test. ğŸ‰',
    error_title: 'An Error Occurred',
    error_no_text: 'Please paste some text or upload a file to analyze.',
    error_generation_failed: 'Failed to generate questions. Please try again.',
    error_parsing_failed: "Failed to parse the file. Please ensure it's a valid PDF, DOCX, TXT, or image file and try again.",
    error_invalid_page_range: 'Invalid page range. Please ensure "From" is not greater than "To".',
    powered_by: 'Powered by Gemini',
    created_by: 'Created by: Ohood Mojali',
    true: 'True',
    false: 'False',
    return_to_start: 'Return to Start',
    upload_another_file: 'Upload Another File',
    back_button: 'Back',
  },
  [Language.AR]: {
    title: 'Ù…ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø°ÙƒÙŠ',
    welcome_subtitle: 'Ø£Ù†Ø´Ø¦ Ø£Ø³Ø¦Ù„Ø© Ù…Ù† Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ ÙÙŠ Ø«ÙˆØ§Ù†Ù.',
    welcome_upload_button: 'ğŸ“„ Ø§Ø±ÙØ¹ Ù…Ù„ÙÙƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ',
    welcome_upload_helper_text: 'Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø§Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù†Øµ ÙˆØ§Ø¶Ø­ ÙˆÙ…ÙƒØªÙˆØ¨ Ø¨Ø·Ø±ÙŠÙ‚Ø© ØµØ­ÙŠØ­Ø©',
    upload_prompt: 'Ø§Ù„ØµÙ‚ Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© Ù‡Ù†Ø§ØŒ Ø£Ùˆ Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø£Ø¹Ù„Ø§Ù‡.',
    upload_button: 'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ',
    upload_instruction: 'Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ù…Ù„ÙÙƒ Ù‡Ù†Ø§ØŒ Ø£Ùˆ Ø§Ù„ØµÙ‚ Ø§Ù„Ù†ØµØŒ Ø£Ùˆ',
    upload_browse: 'ØªØµÙØ­ Ø§Ù„Ù…Ù„ÙØ§Øª',
    upload_file_types: 'PDF, DOCX, TXT, PNG, JPG',
    parsing_file: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ù…Ù„ÙÙƒ...',
    loaded_file_label: 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù…Ù„:',
    processing: 'Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ...',
    select_page_range_title: 'Ø£ÙŠ Ø§Ù„ØµÙØ­Ø§Øª ØªØ±ÙŠØ¯ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„ÙŠÙ‡Ø§ØŸ',
    select_page_range_subtitle: 'ÙŠØ­ØªÙˆÙŠ Ù…Ø³ØªÙ†Ø¯Ùƒ Ø¹Ù„Ù‰ {count} Ù…Ù† Ø§Ù„ØµÙØ­Ø§Øª.',
    from_page: 'Ù…Ù† ØµÙØ­Ø©',
    to_page: 'Ø¥Ù„Ù‰ ØµÙØ­Ø©',
    continue_button: 'Ù…ØªØ§Ø¨Ø¹Ø©',
    select_type_title: 'Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©',
    multiple_choice: 'Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯',
    true_false: 'ØµØ­ / Ø®Ø·Ø£',
    select_count_title: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©ØŸ',
    generate_button: 'ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©',
    generating: 'Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø£Ø³Ø¦Ù„ØªÙƒ...',
    check_answer: 'ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©',
    next_question: 'Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ',
    correct_feedback: 'ØµØ­ÙŠØ­!',
    incorrect_feedback: 'ØºÙŠØ± ØµØ­ÙŠØ­. Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ:',
    more_questions: 'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø©ØŸ',
    completed_title: 'Ø£Ø­Ø³Ù†Øª!',
    completed_message: 'Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø§Ø®ØªØ¨Ø§Ø±Ùƒ Ø¨Ù†Ø¬Ø§Ø­. ğŸ‰',
    error_title: 'Ø­Ø¯Ø« Ø®Ø·Ø£',
    error_no_text: 'ÙŠØ±Ø¬Ù‰ Ù„ØµÙ‚ Ø¨Ø¹Ø¶ Ø§Ù„Ù†Øµ Ø£Ùˆ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ù„ØªØ­Ù„ÙŠÙ„Ù‡.',
    error_generation_failed: 'ÙØ´Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.',
    error_parsing_failed: "ÙØ´Ù„ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„Ù. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ù‡ Ù…Ù„Ù PDF Ø£Ùˆ DOCX Ø£Ùˆ TXT Ø£Ùˆ ØµÙˆØ±Ø© ØµØ§Ù„Ø­ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",
    error_invalid_page_range: 'Ù†Ø·Ø§Ù‚ Ø§Ù„ØµÙØ­Ø§Øª ØºÙŠØ± ØµØ§Ù„Ø­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† ØµÙØ­Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„ÙŠØ³Øª Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©.',
    powered_by: 'Ù…Ø¯Ø¹ÙˆÙ… Ø¨ÙˆØ§Ø³Ø·Ø© Gemini',
    created_by: 'ØªÙ… Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙˆØ§Ø³Ø·Ø©: Ø¹Ù‡ÙˆØ¯ Ù…Ø¬Ù„ÙŠ',
    true: 'ØµØ­',
    false: 'Ø®Ø·Ø£',
    return_to_start: 'Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¨Ø¯Ø§ÙŠØ©',
    upload_another_file: 'Ø±ÙØ¹ Ù…Ù„Ù Ø¢Ø®Ø±',
    back_button: 'Ø±Ø¬ÙˆØ¹',
  },
  [Language.ZH]: {
    title: 'æ™ºèƒ½é—®é¢˜ç”Ÿæˆå™¨',
    welcome_subtitle: 'å‡ ç§’é’Ÿå†…ä»æ‚¨çš„ç¬”è®°ç”Ÿæˆé—®é¢˜ã€‚',
    welcome_upload_button: 'ğŸ“„ ä¸Šä¼ æ‚¨çš„å­¦ä¹ æ–‡ä»¶',
    welcome_upload_helper_text: 'ç¡®ä¿æ–‡æœ¬æ¸…æ™°ä¸”ä¹¦å†™æ­£ç¡®ã€‚',
    upload_prompt: 'åœ¨æ­¤å¤„ç²˜è´´æ‚¨çš„å­¦ä¹ ææ–™ï¼Œæˆ–ä¸Šä¼ ä¸Šé¢çš„æ–‡ä»¶ã€‚',
    upload_button: 'åˆ†ææ–‡æœ¬',
    upload_instruction: 'å°†æ–‡ä»¶æ‹–æ”¾åˆ°æ­¤å¤„ï¼Œç²˜è´´æ–‡æœ¬ï¼Œæˆ–',
    upload_browse: 'æµè§ˆæ–‡ä»¶',
    upload_file_types: 'PDF, DOCX, TXT, PNG, JPG',
    parsing_file: 'æ­£åœ¨è§£ææ‚¨çš„æ–‡ä»¶...',
    loaded_file_label: 'å·²åŠ è½½æ–‡ä»¶ï¼š',
    processing: 'æ­£åœ¨åˆ†ææ‚¨çš„æ–‡æœ¬...',
    select_page_range_title: 'æ‚¨æƒ³å…³æ³¨å“ªäº›é¡µé¢ï¼Ÿ',
    select_page_range_subtitle: 'æ‚¨çš„æ–‡æ¡£æœ‰ {count} é¡µã€‚',
    from_page: 'ä»é¡µé¢',
    to_page: 'åˆ°é¡µé¢',
    continue_button: 'ç»§ç»­',
    select_type_title: 'é€‰æ‹©é—®é¢˜ç±»å‹',
    multiple_choice: 'å¤šé¡¹é€‰æ‹©',
    true_false: 'æ˜¯éé¢˜',
    select_count_title: 'éœ€è¦å¤šå°‘ä¸ªé—®é¢˜ï¼Ÿ',
    generate_button: 'ç”Ÿæˆé—®é¢˜',
    generating: 'æ­£åœ¨ç”Ÿæˆæ‚¨çš„é—®é¢˜...',
    check_answer: 'æ£€æŸ¥ç­”æ¡ˆ',
    next_question: 'ä¸‹ä¸€ä¸ªé—®é¢˜',
    correct_feedback: 'æ­£ç¡®ï¼',
    incorrect_feedback: 'ä¸æ­£ç¡®ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š',
    more_questions: 'ç”Ÿæˆæ›´å¤šé—®é¢˜ï¼Ÿ',
    completed_title: 'åšå¾—å¥½ï¼',
    completed_message: 'æ‚¨å·²æˆåŠŸå®Œæˆæµ‹è¯•ã€‚ ğŸ‰',
    error_title: 'å‘ç”Ÿé”™è¯¯',
    error_no_text: 'è¯·ç²˜è´´ä¸€äº›æ–‡æœ¬æˆ–ä¸Šä¼ æ–‡ä»¶è¿›è¡Œåˆ†æã€‚',
    error_generation_failed: 'ç”Ÿæˆé—®é¢˜å¤±è´¥ã€‚è¯·å†è¯•ä¸€æ¬¡ã€‚',
    error_parsing_failed: "è§£ææ–‡ä»¶å¤±è´¥ã€‚è¯·ç¡®ä¿å®ƒæ˜¯æœ‰æ•ˆçš„ PDFã€DOCXã€TXT æˆ–å›¾åƒæ–‡ä»¶ï¼Œç„¶åé‡è¯•ã€‚",
    error_invalid_page_range: 'æ— æ•ˆçš„é¡µé¢èŒƒå›´ã€‚è¯·ç¡®ä¿â€œä»â€ä¸å¤§äºâ€œåˆ°â€ã€‚',
    powered_by: 'ç”± Gemini æä¾›æ”¯æŒ',
    created_by: 'åˆ›å»ºè€…ï¼š Ohood Mojali',
    true: 'æ˜¯',
    false: 'é',
    return_to_start: 'è¿”å›é¦–é¡µ',
    upload_another_file: 'ä¸Šä¼ å¦ä¸€ä¸ªæ–‡ä»¶',
    back_button: 'è¿”å›',
  },
  [Language.KO]: {
    title: 'ì§€ëŠ¥í˜• ì§ˆë¬¸ ìƒì„±ê¸°',
    welcome_subtitle: 'ëª‡ ì´ˆ ë§Œì— ë…¸íŠ¸ì—ì„œ ì§ˆë¬¸ì„ ìƒì„±í•˜ì„¸ìš”.',
    welcome_upload_button: 'ğŸ“„ í•™ìŠµ íŒŒì¼ ì—…ë¡œë“œ',
    welcome_upload_helper_text: 'í…ìŠ¤íŠ¸ê°€ ëª…í™•í•˜ê³  ì˜¬ë°”ë¥´ê²Œ ì‘ì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤.',
    upload_prompt: 'ì—¬ê¸°ì— í•™ìŠµ ìë£Œë¥¼ ë¶™ì—¬ë„£ê±°ë‚˜ ìœ„ì˜ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.',
    upload_button: 'í…ìŠ¤íŠ¸ ë¶„ì„',
    upload_instruction: 'ì—¬ê¸°ì— íŒŒì¼ì„ ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ê±°ë‚˜, í…ìŠ¤íŠ¸ë¥¼ ë¶™ì—¬ë„£ê±°ë‚˜,',
    upload_browse: 'íŒŒì¼ ì°¾ì•„ë³´ê¸°',
    upload_file_types: 'PDF, DOCX, TXT, PNG, JPG',
    parsing_file: 'íŒŒì¼ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...',
    loaded_file_label: 'ë¡œë“œëœ íŒŒì¼:',
    processing: 'í…ìŠ¤íŠ¸ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...',
    select_page_range_title: 'ì–´ë–¤ í˜ì´ì§€ì— ì§‘ì¤‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
    select_page_range_subtitle: 'ë¬¸ì„œì— {count}í˜ì´ì§€ê°€ ìˆìŠµë‹ˆë‹¤.',
    from_page: 'í˜ì´ì§€ë¶€í„°',
    to_page: 'í˜ì´ì§€ê¹Œì§€',
    continue_button: 'ê³„ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»',
    select_type_title: 'ì§ˆë¬¸ ìœ í˜• ì„ íƒ',
    multiple_choice: 'ê°ê´€ì‹',
    true_false: 'ì°¸/ê±°ì§“',
    select_count_title: 'ëª‡ ê°œì˜ ì§ˆë¬¸ì´ í•„ìš”í•˜ì‹ ê°€ìš”?',
    generate_button: 'ì§ˆë¬¸ ìƒì„±',
    generating: 'ì§ˆë¬¸ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...',
    check_answer: 'ë‹µë³€ í™•ì¸',
    next_question: 'ë‹¤ìŒ ì§ˆë¬¸',
    correct_feedback: 'ì •ë‹µì…ë‹ˆë‹¤!',
    incorrect_feedback: 'ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:',
    more_questions: 'ë” ë§ì€ ì§ˆë¬¸ì„ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
    completed_title: 'ì˜ í•˜ì…¨ìŠµë‹ˆë‹¤!',
    completed_message: 'í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ğŸ‰',
    error_title: 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤',
    error_no_text: 'ë¶„ì„í•  í…ìŠ¤íŠ¸ë¥¼ ë¶™ì—¬ë„£ê±°ë‚˜ íŒŒì¼ì„ ì—…ë¡œë“œí•´ ì£¼ì„¸ìš”.',
    error_generation_failed: 'ì§ˆë¬¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.',
    error_parsing_failed: "íŒŒì¼ ë¶„ì„ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìœ íš¨í•œ PDF, DOCX, TXT ë˜ëŠ” ì´ë¯¸ì§€ íŒŒì¼ì¸ì§€ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•˜ì‹­ì‹œì˜¤.",
    error_invalid_page_range: 'ì˜ëª»ëœ í˜ì´ì§€ ë²”ìœ„ì…ë‹ˆë‹¤. "ì‹œì‘"ì´ "ë"ë³´ë‹¤ í¬ì§€ ì•Šì€ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤.',
    powered_by: 'Gemini ì œê³µ',
    created_by: 'ë§Œë“  ì‚¬ëŒ: Ohood Mojali',
    true: 'ì°¸',
    false: 'ê±°ì§“',
    return_to_start: 'ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°',
    upload_another_file: 'ë‹¤ë¥¸ íŒŒì¼ ì—…ë¡œë“œ',
    back_button: 'ë’¤ë¡œ',
  },
};

/**
 * Custom hook to manage application localization.
 * @returns An object containing the current language, a function to set the language,
 *          and a translation function `t`.
 */
export const useLocalization = () => {
  const [language, setLanguage] = useState<Language>(Language.EN);

  useEffect(() => {
    // Set the lang attribute on the HTML element for CSS font selection
    document.documentElement.lang = language;
    // Set text direction for Arabic
    document.documentElement.dir = language === Language.AR ? 'rtl' : 'ltr';
  }, [language]);

  const t = useCallback(
    (key: string): string => {
      return translations[language][key] || key;
    },
    [language]
  );

  return { language, setLanguage, t };
};